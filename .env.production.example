# --- Production Environment Template ---
# Copy this file to ".env.production" on the server and fill real values.

# --- Server ---
NODE_ENV=production
PORT=5002
SECRET=replace_with_strong_jwt_secret
CLIENT_URL=http://your-frontend-domain-or-ip
FRONTEND_URL=http://your-frontend-domain-or-ip
EXTRA_ORIGINS=
TRUST_PROXY=1

# --- HTTPS (Optional) ---
# Default is HTTP-only for LAN deployment. Set to true only when HTTPS is fully configured.
HTTPS_ONLY=false
ENABLE_HTTPS_HEADERS=false
# If TLS terminates at IIS/Nginx/Caddy, you can leave these empty.
# If Node.js serves HTTPS directly, set cert/key paths.
TLS_KEY_FILE=
TLS_CERT_FILE=
# Optional when you also run an HTTP listener that redirects to HTTPS.
HTTP_REDIRECT_PORT=
HTTPS_PORT=443

# --- Uploads ---
UPLOAD_DIR=/srv/psuic/uploads
UPLOAD_ALLOWED_MIME=image/jpeg,image/png,image/webp
UPLOAD_MAX_BYTES=5242880
UPLOAD_MAX_WIDTH=1920
UPLOAD_MAX_HEIGHT=1920
UPLOAD_QUALITY=82
UPLOAD_TARGET_FORMAT=webp
UPLOAD_ORPHAN_RETENTION_HOURS=24
UPLOAD_BACKUP_RETENTION_DAYS=14
UPLOAD_BACKUP_DIR=/srv/psuic/backups/uploads
# upload backup mode: incremental | differential
UPLOAD_BACKUP_MODE=incremental
# for differential mode, force a new full baseline every N days (0 = never auto-refresh)
UPLOAD_BACKUP_FULL_INTERVAL_DAYS=7
UPLOAD_BACKUP_CRON="20 3 * * *"
UPLOAD_CLEANUP_CRON="50 3 * * *"
DB_BACKUP_CRON="0 3 * * *"
# Optional offsite mirror (SMB/NAS/another disk). Leave empty to disable.
OFFSITE_BACKUP_DIR=
OFFSITE_BACKUP_RETENTION_DAYS=30
OFFSITE_BACKUP_CRON="40 3 * * *"

# Runtime log rotation guard (for logs/out.log, logs/error.log and PM2 logs)
LOG_ROTATE_MAX_MB=20
LOG_RETENTION_DAYS=14
LOG_ROTATE_CRON="15 * * * *"

# Minimum interval between Google sync calls per user (milliseconds)
GOOGLE_SYNC_MIN_INTERVAL_MS=300000

# --- Database ---
DATABASE_URL="mysql://user:password@127.0.0.1:3306/tracking_system"

# --- Email (SMTP) ---
MAIL_USER=your_mail_user@example.com
MAIL_PASS="your_mail_app_password"

# --- Google Calendar Service Account ---
GOOGLE_PROJECT_ID=your-google-project-id
GOOGLE_CLIENT_EMAIL=service-account@project.iam.gserviceaccount.com
GOOGLE_CALENDAR_ID=your-calendar-id@example.com
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_KEY_CONTENT\n-----END PRIVATE KEY-----\n"
